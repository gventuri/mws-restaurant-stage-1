class DBHelper{static get DATABASE_URL(){return`http://localhost:1337/restaurants`}static fetchRestaurants(a){console.log("Restaurants are...",window.restaurants),window.restaurants&&window.restaurants.length?a(null,window.restaurants):fetch(DBHelper.DATABASE_URL).then(function(b){if(b.ok)return b.json();console.log("Ok, error!");const c=`Request failed. Returned status of ${b.status}`;a(c,window.restaurants)}).then(function(b){for(let c in window.restaurants=b,console.log("Fetching..."),a(null,b),window.restaurants)add2DB(window.restaurants[c],window.db)})}static fetchRestaurantById(a,b){fetch(DBHelper.DATABASE_URL+"/"+a).then(function(c){return 200===c.status?c.json():void b(error,null)}).then(function(c){b(null,c)})}static fetchRestaurantByCuisine(a,b){DBHelper.fetchRestaurants((c,d)=>{if(c)b(c,null);else{const e=d.filter(f=>f.cuisine_type==a);b(null,e)}})}static fetchRestaurantByNeighborhood(a,b){DBHelper.fetchRestaurants((c,d)=>{if(c)b(c,null);else{const e=d.filter(f=>f.neighborhood==a);b(null,e)}})}static fetchRestaurantByCuisineAndNeighborhood(a,b,c){DBHelper.fetchRestaurants((d,e)=>{if(d)c(d,null);else{let f=e;"all"!=a&&(f=f.filter(g=>g.cuisine_type==a)),"all"!=b&&(f=f.filter(g=>g.neighborhood==b)),c(null,f)}})}static fetchNeighborhoods(a){DBHelper.fetchRestaurants((b,c)=>{if(console.log("then",b," - ",c),b)a(b,null);else{const d=c.map((f,g)=>c[g].neighborhood),e=d.filter((f,g)=>d.indexOf(f)==g);a(null,e)}})}static fetchCuisines(a){DBHelper.fetchRestaurants((b,c)=>{if(b)a(b,null);else{const d=c.map((f,g)=>c[g].cuisine_type),e=d.filter((f,g)=>d.indexOf(f)==g);a(null,e)}})}static urlForRestaurant(a){return`./restaurant.html?id=${a.id}`}static imageUrlForRestaurant(a,b){return a.photograph?(b&&(a.photograph=a.photograph.replace(/.webp/,`_${b}.webp`)),`/img/${a.photograph}.webp`):"https://via.placeholder.com/800x600?text=No%20Photo"}static mapMarkerForRestaurant(a,b){const c=new google.maps.Marker({position:a.latlng,title:a.name,url:DBHelper.urlForRestaurant(a),map:b,animation:google.maps.Animation.DROP});return c}}